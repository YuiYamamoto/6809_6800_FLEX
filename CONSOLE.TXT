** CONSOLE I/O PROGRAM for 6809SBD**    '2018.03.06*    Copyright by Y.Yamamoto**ACIA(6850) for console I/OSCMD EQU $F0BC cmdSSTS EQU SCMD statusSDATA EQU SCMD+1 dataMRSTA EQU $43 master resetCLRTSA EQU $55 RTS=H,1stopbit,non pari,8bit,16xSERTSA EQU $15 RTS=L,1stopbit,non pari,8bit,16xSTART EQU $CD00* ORG $D3E5*INCHNE FDB INNECHIHNDLR FDB IHNDSWIVEC FDB $FFFFIRQVEC FDB $FFFFTMOFF FDB RETTMON FDB RETTMINT FDB RETMONITR FDB $F837TINIT FDB INITSTAT FDB STATUSOUTCH FDB OUTPUTINCH FDB INPUT* ORG $D370 INNECH EQU *IN01 LDA SSTS ANDA #$01 BEQ IN01 LDA SDATA get data ANDA #$7FRET RTS*IHND RTI*INPUT EQU * BSR INNECH*OUTPUT EQU * PSHS AOUT01 LDA SSTS ANDA #$02 BEQ OUT01 PULS A STA SDATA send data RTS*STATUS EQU * PSHS A LDA SSTS ANDA #$01 PULS A RTS*INIT EQU ** initialize ACIA(6850) LDA #MRSTA STA SCMD NOP LDA #SERTSA RTS=L,1stopbit,non pari,8bit,16x STA SCMD*wait acia buffer emptyINI2 LDA SDATA dummy read LDA SSTS check buffer full ANDA #$01 BNE INI2 RTS* END START